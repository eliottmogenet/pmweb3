<% if params[:puzzle].present? %>
  <div>Placeholder for 3D puzzle</div>
<% else %>
  <% if params[:by_topic].present?%> <!-- Rules div -->
    <% unless @user_topic %>
      <div class="rules-description" data-controller="topic" data-topic-target="rules">
        <h2>Rules</h2>
        <p><%= @topic_selected.rules %></p>
        <button type="button" class="button-type" style="background-color: <%= @project.txt_color %>;" data-topic-target="btn" data-action="click->topic#read" data-topic-id="<%= @topic_selected.id%>">
          Got it ðŸ‘Œ
        </button>
      </div>
    <% end %>
  <% end %>

  <% if params[:by_topic].present? && policy(@task).create? %>
  	<% if user_signed_in? %>
	    <div class="task-create-button">
	      <%= simple_form_for([ @project, @task ], html: { "data-tasks-target": "createForm", "data-action": "submit->tasks#submit" }) do |f| %>
	        <%= f.input :topic_id, as: :hidden, input_html: { value: @topic_selected.id } %>
	        <%= f.input :title, label: false, placeholder: '+ Create a new puzzle piece', input_html: { autocomplete: 'off', "data-tasks-target": "input" }, :error_html => { :id => "name_error"} %>
	      <% end %>
	    </div>
  	<% else %>
  	<p>This subpuzzle is open for task creation, but you need to <a href="#" class="sign-in-link" data-toggle="modal" data-target="#login-modal">sign-in first</a> !</p>
		<% end %>
  <% end %>

  <div data-tasks-target="list" class="mt-3" id="tasks" data-project-id="<%= @project.id %>" data-user-id="<%= current_user&.id %>"> <!-- Div with all the tasks --> 
    <% @tasks.each do |task| %>
      <%= render "tasks/task", task: task %>
    <% end %>
  </div>
<% end %>
